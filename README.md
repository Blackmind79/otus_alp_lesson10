# Bash

BASH-—Å–∫—Ä–∏–ø—Ç

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [Bash](#bash)
  - [–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ](#—Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ)
  - [–¶–µ–ª—å](#—Ü–µ–ª—å)
  - [–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è](#–ø–æ—à–∞–≥–æ–≤–∞—è-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è-–¥–æ–º–∞—à–Ω–µ–≥–æ-–∑–∞–¥–∞–Ω–∏—è)
    - [–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å](#—á—Ç–æ-–Ω—É–∂–Ω–æ-—Å–¥–µ–ª–∞—Ç—å)
    - [–ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏](#–∫—Ä–∏—Ç–µ—Ä–∏–∏-–æ—Ü–µ–Ω–∫–∏)
  - [–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ—Ç –∞–≤—Ç–æ—Ä–∞](#–ø—Ä–∏–º–µ—á–∞–Ω–∏–µ-–æ—Ç-–∞–≤—Ç–æ—Ä–∞)
    - [–ó–∞–º–µ—á–∞–Ω–∏–µ 1](#–∑–∞–º–µ—á–∞–Ω–∏–µ-1)
    - [–ó–∞–º–µ—á–∞–Ω–∏–µ 2](#–∑–∞–º–µ—á–∞–Ω–∏–µ-2)
    - [–ó–∞–º–µ—á–∞–Ω–∏–µ 3](#–∑–∞–º–µ—á–∞–Ω–∏–µ-3)
    - [–ó–∞–º–µ—á–∞–Ω–∏–µ 4](#–∑–∞–º–µ—á–∞–Ω–∏–µ-4)
  - [–ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑](#–±–∞–∑–æ–≤—ã–π-–æ–±—Ä–∞–∑)
  - [–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–æ–≤](#–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ-–∑–∞–¥–∞–Ω–∏—è-–∏-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏-—Ä–∞–±–æ—Ç—ã-—Å–∫—Ä–∏–ø—Ç–æ–≤)

## –¶–µ–ª—å

- –Ω–∞–ø–∏—Å–∞—Ç—å bash-—Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –µ–∂–µ—á–∞—Å–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ email –æ—Ç—á—ë—Ç –æ —Ä–∞–±–æ—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

## –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

–ù–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è CRON, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑ –≤ —á–∞—Å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –Ω–∞ –∑–∞–¥–∞–Ω–Ω—É—é –ø–æ—á—Ç—É.

–û—Ç—á—ë—Ç –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:

1. IP-–∞–¥—Ä–µ—Å–∞ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞);
2. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ URL —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞);
3. –û—à–∏–±–∫–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞);
4. HTTP-–∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (—Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–ø—É—Å–∫–∞).

–°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–ø–∏–π, –¥–æ –µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

–í –ø–∏—Å—å–º–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ–ø–∏—Å–∞–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω.

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

–¢—Ä–∞–ø—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ `sed` –∏ `find`.

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ—Ç –∞–≤—Ç–æ—Ä–∞

### –ó–∞–º–µ—á–∞–Ω–∏–µ 1

–í–æ–æ–±—â–µ-—Ç–æ –ø–æ–¥–æ–±–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –æ—Ç—á–µ—Ç–∞ –Ω–µ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ Bash, —Ç–∞–∫ –∫–∞–∫ –≤—ã—Å–æ–∫–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å–±–æ—è –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, –Ω–∞–ø–æ–¥–æ–±–∏–µ Grafana + Loki + Alloy. –ò–ª–∏ ELK-—Å—Ç–µ–∫.
–¢–∞–º –Ω–µ —Ç–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –±–æ–ª–µ–µ –¥–æ—Å–∫–æ–Ω–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –Ω–æ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∞–ª–µ—Ä—Ç –∫—É–¥–∞ —É–≥–æ–¥–Ω–æ.

### –ó–∞–º–µ—á–∞–Ω–∏–µ 2

–î–ª—è –∞–Ω–∞–ª–∏–∑–∞, –ª–æ–≥–∏ –≤ `nginx` –Ω—É–∂–Ω–æ –≤—ã–≥—Ä—É–∂–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `json`, —Ç–æ–≥–¥–∞ –ø–∞—Ä—Å–∏–Ω–≥ –±—É–¥–µ—Ç –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –ª–µ–≥—á–µ —á–µ—Ä–µ–∑ `jq`.
–ù–æ, —Ç–∞–∫ –∫–∞–∫ –≤ –∫—Ä–∏—Ç–µ—Ä–∏—è—Ö –æ—Ü–µ–Ω–∫–∏ —É–∫–∞–∑–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π `sed` –∏ `find`, —Ç–æ –±—É–¥–µ–º –ø–∞—Ä—Å–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ª–æ–≥.

### –ó–∞–º–µ—á–∞–Ω–∏–µ 3

–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ email —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ø–æ—á—Ç—ã. –†–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.
–Ø –±—É–¥—É –æ—Ç—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç—É —Å —Å–æ–∑–¥–∞–Ω–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–∞–∫–µ—Ç `swak` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏.

### –ó–∞–º–µ—á–∞–Ω–∏–µ 4

–û–±—ã—á–Ω–æ –∫—Ä–æ–º–µ –ª–æ–≥–∞ `access.log` nginx –∏–º–µ–µ—Ç —Ñ–∞–π–ª –æ—à–∏–±–æ–∫ `error.log`.
–Ø –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é –µ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏–¥–µ—Ç—Å—è –ø—Ä–æ–ø–∏—Å—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö `info`, `warn` –∏–ª–∏ –Ω–µ –¥–∞–π –±–æ–≥ `debug`.

## –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ `Ubuntu 24.04.3 LTS`.

<table>
<tr><td style="border: 1px solid #777; padding: 10px;">

```bash
root@ubuntu:~# uname --all
Linux ubuntu 6.8.0-100-generic #100-Ubuntu SMP PREEMPT_DYNAMIC Tue Jan 13 16:40:06 UTC 2026 x86_64 x86_64 x86_64 GNU/Linux
root@ubuntu:~# cat /etc/os-release
PRETTY_NAME="Ubuntu 24.04.3 LTS"
NAME="Ubuntu"
VERSION_ID="24.04"
VERSION="24.04.3 LTS (Noble Numbat)"
VERSION_CODENAME=noble
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=noble
LOGO=ubuntu-logo
```

<details>
<summary>üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç –∫–æ–¥–∞...</summary>
<img src="screenshots/base_image.png" alt="Base image">
</details>

</td></tr>
</table>

## –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–æ–≤

–ò—Ç–æ–≥–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø–∞–ø–∫–µ `files/report_script.sh`.
–î–ª—è —Ä–∞–±–æ—Ç—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–∞ –æ—Ç—á–µ—Ç–∞ –Ω–∞ e-mail —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏—Ç—å –ø–∞–∫–µ—Ç `swaks`.

```bash
sudo apt-get update && sudo apt-get install -y swaks
```

–¢–∞–∫–∂–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –≤–∞—à–µ–π –ø–æ—á—Ç—ã –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–ü–æ—á—Ç–µ
[https://id.yandex.ru/security/app-passwords](https://id.yandex.ru/security/app-passwords)

> –ò–º–µ–π—Ç–µ –≤–≤–∏–¥—É, —á—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 500 –ø–∏—Å–µ–º –≤ –¥–µ–Ω—å –ø—Ä–∏ —Ç–∞–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ

–ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª `.env_example` –≤ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à e-mail –∏ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å –∫—Ä–µ–¥–∞–º–∏ –±—É–¥–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω –≤ –º–æ–º–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ—Ç—á–µ—Ç–∞ –Ω–∞ –ø–æ—á—Ç—É.

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–∞–≥–∞–µ—Ç—Å—è —Ñ–∞–π–ª `access.log`. –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –ª–æ–≥–∞ `nginx` —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Ñ–æ—Ä–º—ã.
–ö–∞–∫ —è —É–∂–µ –æ—Ç–º–µ—Ç–∏–ª –≤—ã—à–µ - –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –ª–æ–≥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ json.
–ë—É–¥–µ—Ç –≥–æ—Ä–∞–∑–¥–æ –º–µ–Ω—å—à–µ –ø—Ä–æ–±–ª–µ–º, –Ω–æ —ç—Ç–æ, –≤–ø—Ä–æ—á–µ–º, –Ω–µ —Ç–µ–º–∞ —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `report_script.sh.ladf`, –≤ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–∞ –¥–∞—Ç–∞
–ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞–ø–∏—Å–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ª–æ–≥—É. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –Ω–µ–≥–æ –¥–∞—Ç—É –∏–∑ —Å–µ—Ä–µ–¥–∏–Ω—ã –ª–æ–≥–∞.
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ª–æ–≥ –±—É–¥–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω –æ—Ç —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏.

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª `/tmp/report_script.sh.lock`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–ø—É—Å–∫ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤ —Ñ–∞–π–ª–∞.
–¢–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ñ–∞–π–ª –æ—Ç—á–µ—Ç–∞ `/tmp/nginx_report.XXXXXX` (–≥–¥–µ XXXXXX - –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã–π `mktemp` –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤),
–∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ email.

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ —Ñ–∞–π–ª—ã –∏–∑ /tmp/ —É–¥–∞–ª—è—é—Ç—Å—è.

–î–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –≤ cron –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –æ—Ç –∏–º–µ–Ω–∏ —Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –µ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç—å.

```bash
$ crontab -e

# –ö–∞–∂–¥—ã–π —á–∞—Å –≤ 0 –º–∏–Ω—É—Ç
0 * * * * /root/report_script.sh >> /var/log/report_script.log 2>&1
```
